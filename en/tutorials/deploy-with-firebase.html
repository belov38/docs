<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Deploy with Firebase | vuesion</title>
    <meta name="description" content="The most complete boilerplate for production-ready PWAs. With focus on performance, development speed, and best practices">
    <link rel="icon" href="/docs/logo.png">
  <link rel="manifest" href="/docs/manifest.json">
  <meta name="theme-color" content="#f43b6c">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <link rel="apple-touch-icon" href="/docs/icons/apple-touch-icon-152x152.png">
  <link rel="mask-icon" href="/docs/icons/safari-pinned-tab.svg" color="#f43b6c">
  <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
  <meta name="msapplication-TileColor" content="#f43b6c">
    
    <link rel="preload" href="/docs/assets/css/0.styles.d4332759.css" as="style"><link rel="preload" href="/docs/assets/js/app.2121c953.js" as="script"><link rel="preload" href="/docs/assets/js/2.bed876bd.js" as="script"><link rel="preload" href="/docs/assets/js/25.39f5d5d5.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.8389fc3c.js"><link rel="prefetch" href="/docs/assets/js/11.d38fbd8b.js"><link rel="prefetch" href="/docs/assets/js/12.75b57e94.js"><link rel="prefetch" href="/docs/assets/js/13.75c8e17c.js"><link rel="prefetch" href="/docs/assets/js/14.d8f5daee.js"><link rel="prefetch" href="/docs/assets/js/15.0230e652.js"><link rel="prefetch" href="/docs/assets/js/16.8c72b40e.js"><link rel="prefetch" href="/docs/assets/js/17.2a4d9dff.js"><link rel="prefetch" href="/docs/assets/js/18.a9e7b5da.js"><link rel="prefetch" href="/docs/assets/js/19.345298f4.js"><link rel="prefetch" href="/docs/assets/js/20.49333757.js"><link rel="prefetch" href="/docs/assets/js/21.6fff385e.js"><link rel="prefetch" href="/docs/assets/js/22.c11af838.js"><link rel="prefetch" href="/docs/assets/js/23.49f2d291.js"><link rel="prefetch" href="/docs/assets/js/24.31b3bcbd.js"><link rel="prefetch" href="/docs/assets/js/26.4f0d45a2.js"><link rel="prefetch" href="/docs/assets/js/27.e88ef5ed.js"><link rel="prefetch" href="/docs/assets/js/28.0a00b3e3.js"><link rel="prefetch" href="/docs/assets/js/29.e21128f4.js"><link rel="prefetch" href="/docs/assets/js/3.0941e707.js"><link rel="prefetch" href="/docs/assets/js/30.c1ae6398.js"><link rel="prefetch" href="/docs/assets/js/31.9ad3c3c8.js"><link rel="prefetch" href="/docs/assets/js/32.22636cf2.js"><link rel="prefetch" href="/docs/assets/js/33.d1e5ac62.js"><link rel="prefetch" href="/docs/assets/js/34.b8ad0a68.js"><link rel="prefetch" href="/docs/assets/js/35.8477db22.js"><link rel="prefetch" href="/docs/assets/js/36.423b8875.js"><link rel="prefetch" href="/docs/assets/js/37.efe7199b.js"><link rel="prefetch" href="/docs/assets/js/38.7dec397b.js"><link rel="prefetch" href="/docs/assets/js/39.f741e1b2.js"><link rel="prefetch" href="/docs/assets/js/4.7bf71852.js"><link rel="prefetch" href="/docs/assets/js/40.310a6c67.js"><link rel="prefetch" href="/docs/assets/js/41.8af3c4a8.js"><link rel="prefetch" href="/docs/assets/js/42.18710a4d.js"><link rel="prefetch" href="/docs/assets/js/43.100ec6d0.js"><link rel="prefetch" href="/docs/assets/js/44.8399b231.js"><link rel="prefetch" href="/docs/assets/js/45.4cbcf4f8.js"><link rel="prefetch" href="/docs/assets/js/46.5e67c456.js"><link rel="prefetch" href="/docs/assets/js/47.e48a9193.js"><link rel="prefetch" href="/docs/assets/js/5.958d7fd5.js"><link rel="prefetch" href="/docs/assets/js/6.f3f9f5d1.js"><link rel="prefetch" href="/docs/assets/js/7.d468b723.js"><link rel="prefetch" href="/docs/assets/js/8.b6e4d951.js"><link rel="prefetch" href="/docs/assets/js/9.2c381038.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.d4332759.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/en/" class="home-link router-link-active"><!----> <span class="site-name">vuesion</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/en/FAQ.html" class="nav-link">FAQ</a></div><div class="nav-item"><a href="/docs/en/introduction.html" class="nav-link">Guide</a></div><div class="nav-item"><a href="https://vuesion.herokuapp.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Interactive Demo
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://vuesion.herokuapp.com/storybook" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Components
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://discord.gg/59x5cg2" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Discord
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://slack-vuesion.herokuapp.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Slack
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">中文</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/en/tutorials/deploy-with-firebase.html" class="nav-link router-link-exact-active router-link-active">English</a></li><li class="dropdown-item"><!----> <a href="/docs/zh-cn/" class="nav-link">简体中文</a></li></ul></div></div> <a href="https://github.com/vuesion/docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/en/FAQ.html" class="nav-link">FAQ</a></div><div class="nav-item"><a href="/docs/en/introduction.html" class="nav-link">Guide</a></div><div class="nav-item"><a href="https://vuesion.herokuapp.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Interactive Demo
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://vuesion.herokuapp.com/storybook" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Components
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://discord.gg/59x5cg2" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Discord
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://slack-vuesion.herokuapp.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Slack
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">中文</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/en/tutorials/deploy-with-firebase.html" class="nav-link router-link-exact-active router-link-active">English</a></li><li class="dropdown-item"><!----> <a href="/docs/zh-cn/" class="nav-link">简体中文</a></li></ul></div></div> <a href="https://github.com/vuesion/docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Getting started</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/en/FAQ.html" class="sidebar-link">FAQ</a></li><li><a href="/docs/en/guide/install.html" class="sidebar-link">Installation</a></li><li><a href="/docs/en/guide/run.html" class="sidebar-link">Run the application</a></li><li><a href="/docs/en/guide/test.html" class="sidebar-link">Run the tests</a></li><li><a href="/docs/en/guide/i18n.html" class="sidebar-link">I18n</a></li><li><a href="/docs/en/guide/cli.html" class="sidebar-link">Create a new Page</a></li><li><a href="/docs/en/guide/clean-up.html" class="sidebar-link">Clean up</a></li><li><a href="/docs/en/guide/vuex.html" class="sidebar-link">Persisting state</a></li><li><a href="/docs/en/guide/build.html" class="sidebar-link">Production build</a></li><li><a href="/docs/en/guide/config.html" class="sidebar-link">Config</a></li><li><a href="/docs/en/guide/contribute.html" class="sidebar-link">Support the project</a></li><li><a href="/docs/en/guide/update.html" class="sidebar-link">Stay up to date</a></li><li><a href="/docs/en/guide/deployment.html" class="sidebar-link">Deployment</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Tutorials</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/en/tutorials/redirects.html" class="sidebar-link">Redirect to another page</a></li><li><a href="/docs/en/tutorials/prefetch-and-state-transfer.html" class="sidebar-link">Prefetching data</a></li><li><a href="/docs/en/tutorials/third-party.html" class="sidebar-link">Use a 3rd party UI library</a></li><li><a href="/docs/en/tutorials/deploy-with-firebase.html" class="active sidebar-link">Deploy with Firebase</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/en/tutorials/deploy-with-firebase.html#single-page-application" class="sidebar-link">Single Page Application</a></li><li class="sidebar-sub-header"><a href="/docs/en/tutorials/deploy-with-firebase.html#universal-ssr-application" class="sidebar-link">Universal/SSR Application</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Docs</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/en/docs/style-guide.html" class="sidebar-link">Style Guide</a></li><li><a href="/docs/en/docs/pwa.html" class="sidebar-link">Progressive-Web-App</a></li><li><a href="/docs/en/docs/npm-scripts.html" class="sidebar-link">NPM Scripts</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="deploy-with-firebase"><a href="#deploy-with-firebase" aria-hidden="true" class="header-anchor">#</a> Deploy with Firebase</h1> <h2 id="single-page-application"><a href="#single-page-application" aria-hidden="true" class="header-anchor">#</a> Single Page Application</h2> <p>This is a straightforward process. It only uses Firebase Hosting. You will need an existing Firebase project, or you will need to create one using the Firebase CLI.</p> <h3 id="step-1-setup"><a href="#step-1-setup" aria-hidden="true" class="header-anchor">#</a> Step 1: setup</h3> <p><code>% npx @vuesion/create vuesion-firebase-spa</code><br> <code>% cd vuesion-firebase-spa</code>\</p> <p>If you don't already have the Firebase CLI installed: <code>% npm install -g firebase-tools</code></p> <h3 id="step-2-initialize-firebase"><a href="#step-2-initialize-firebase" aria-hidden="true" class="header-anchor">#</a> Step 2: initialize Firebase</h3> <p><code>% firebase init</code></p> <p>Select <code>Hosting</code>, select your project, say <code>Yes</code> to configure your project as a single-page app and specify <code>dist</code> as your public directory. Shown below is an example of this process.</p> <div class="language- extra-class"><pre class="language-text"><code>     ######## #### ########  ######## ########     ###     ######  ########
     ##        ##  ##     ## ##       ##     ##  ##   ##  ##       ##
     ######    ##  ########  ######   ########  #########  ######  ######
     ##        ##  ##    ##  ##       ##     ## ##     ##       ## ##
     ##       #### ##     ## ######## ########  ##     ##  ######  ########

You're about to initialize a Firebase project in this directory:

  /example/path/vuesion-firebase-spa

? Which Firebase CLI features do you want to set up for this folder? Press Space to select features, then Enter to con
firm your choices. Hosting: Configure and deploy Firebase Hosting sites

=== Project Setup

First, let's associate this project directory with a Firebase project.
You can create multiple project aliases by running firebase use --add,
but for now we'll just set up a default project.

? Please select an option: Use an existing project
? Select a default Firebase project for this directory: example-12345 (example)
i  Using project example-12345 (reclaim)

=== Hosting Setup

Your public directory is the folder (relative to your project directory) that
will contain Hosting assets to be uploaded with firebase deploy. If you
have a build process for your assets, use your build's output directory.

? What do you want to use as your public directory? dist
? Configure as a single-page app (rewrite all urls to /index.html)? Yes
✔  Wrote dist/index.html

i  Writing configuration info to firebase.json...
i  Writing project information to .firebaserc...

✔  Firebase initialization complete!
</code></pre></div><h3 id="step-3-test-locally"><a href="#step-3-test-locally" aria-hidden="true" class="header-anchor">#</a> Step 3: test locally</h3> <p><code>% npm install</code><br> <code>% npm run build:spa</code><br> <code>% firebase serve</code> serves your app at http://localhost:5000</p> <h3 id="step-4-deploy"><a href="#step-4-deploy" aria-hidden="true" class="header-anchor">#</a> Step 4: deploy</h3> <p>Set the API base url in src/app/config/production.json to the url where your app will be hosted.</p> <div class="language- extra-class"><pre class="language-text"><code>{
  &quot;api&quot;: {
    &quot;baseUrl&quot;: &quot;&lt;your-project-url-here&gt;&quot;
  }
}
</code></pre></div><p><code>% firebase deploy</code> deploys your app at the url specified by your Firebase project</p> <h2 id="universal-ssr-application"><a href="#universal-ssr-application" aria-hidden="true" class="header-anchor">#</a> Universal/SSR Application</h2> <p>This will require Firebase Hosting and Firebase Functions. Firebase Hosting will redirect requests to your url to a Firebase function which will run your application.</p> <p>You will need an existing Firebase project, or you will need to create one using the Firebase CLI.</p> <h3 id="step-1-create-new-project"><a href="#step-1-create-new-project" aria-hidden="true" class="header-anchor">#</a> Step 1: create new project</h3> <p><code>% npx @vuesion/create vuesion-firebase-ssr</code><br> <code>% cd vuesion-firebase-ssr</code></p> <p>If you don't already have the Firebase CLI installed: <code>% npm install -g firebase-tools</code></p> <h3 id="step-2-firebase-init-hosting-and-functions"><a href="#step-2-firebase-init-hosting-and-functions" aria-hidden="true" class="header-anchor">#</a> Step 2: firebase init hosting and functions</h3> <p><code>% firebase init</code></p> <blockquote><p>select functions and hosting<br>
choose your firebase project or create a new one<br>
choose typescript<br>
(optional) say yes to using TSLint<br>
(optional) say yes to install dependencies now<br>
specify dist/client as your public directory<br>
say yes to configuring your app as a single-page app</p></blockquote> <h3 id="step-3-set-firebase-json"><a href="#step-3-set-firebase-json" aria-hidden="true" class="header-anchor">#</a> Step 3: set firebase.json</h3> <p>Function stays pointing to the default location, /functions<br>
Hosting rewrites all urls to the result of passing that url into the vuesionApp export from functions. We will define that in functions/src/index.ts in Step 5.</p> <div class="language- extra-class"><pre class="language-text"><code>{
  &quot;functions&quot;: {
    &quot;predeploy&quot;: [
      &quot;npm --prefix \&quot;$RESOURCE_DIR\&quot; run lint&quot;,
      &quot;npm --prefix \&quot;$RESOURCE_DIR\&quot; run build&quot;
    ]
  },
  &quot;hosting&quot;: {
    &quot;public&quot;: &quot;dist&quot;,
    &quot;ignore&quot;: [
      &quot;firebase.json&quot;,
      &quot;**/.*&quot;,
      &quot;**/node_modules/**&quot;
    ],
    &quot;rewrites&quot;: [
      {
        &quot;source&quot;: &quot;**&quot;,
        &quot;function&quot;: &quot;vuesionApp&quot;
      }
    ]
  }
}
</code></pre></div><h3 id="step-4-adjust-config-files-in-functions-folder"><a href="#step-4-adjust-config-files-in-functions-folder" aria-hidden="true" class="header-anchor">#</a> Step 4: adjust config files in functions folder</h3> <h4 id="adjust-functions-package-json"><a href="#adjust-functions-package-json" aria-hidden="true" class="header-anchor">#</a> Adjust /functions/package.json</h4> <p>Add production dependencies from package.json to functions/package.json and bring typescript version up to match package.json. Also add a prebuild script to copy /dist, /.vuesion, and /i18n into /functions</p> <div class="language- extra-class"><pre class="language-text"><code>{
  &quot;name&quot;: &quot;functions&quot;,
  &quot;scripts&quot;: {
    &quot;lint&quot;: &quot;tslint --project tsconfig.json&quot;,
    &quot;prebuild&quot;: &quot;rm -rf ./dist ./.vuesion ./i18n &amp;&amp; cp -rf ../dist ./dist &amp;&amp; cp -rf ../.vuesion ./.vuesion &amp;&amp; cp -rf ../i18n ./i18n&quot;,
    &quot;build&quot;: &quot;tsc&quot;,
    &quot;serve&quot;: &quot;npm run build &amp;&amp; firebase serve --only functions&quot;,
    &quot;shell&quot;: &quot;npm run build &amp;&amp; firebase functions:shell&quot;,
    &quot;start&quot;: &quot;npm run shell&quot;,
    &quot;deploy&quot;: &quot;firebase deploy --only functions&quot;,
    &quot;logs&quot;: &quot;firebase functions:log&quot;
  },
  &quot;engines&quot;: {
    &quot;node&quot;: &quot;8&quot;
  },
  &quot;main&quot;: &quot;lib/index.js&quot;,
  &quot;dependencies&quot;: {
    &quot;firebase-admin&quot;: &quot;^8.0.0&quot;,
    &quot;firebase-functions&quot;: &quot;^3.1.0&quot;,
    &quot;@vuesion/addon-vuex-persist&quot;: &quot;^3.1.1&quot;,
    &quot;@vuesion/models&quot;: &quot;^3.1.1&quot;,
    &quot;@vuesion/utils&quot;: &quot;^3.1.1&quot;,
    &quot;@vuesion/webpack&quot;: &quot;^3.1.1&quot;,
    &quot;accept-language&quot;: &quot;3.0.18&quot;,
    &quot;animejs&quot;: &quot;3.1.0&quot;,
    &quot;axios&quot;: &quot;^0.19.0&quot;,
    &quot;body-parser&quot;: &quot;1.19.0&quot;,
    &quot;compression&quot;: &quot;1.7.4&quot;,
    &quot;config&quot;: &quot;3.2.2&quot;,
    &quot;cookie-parser&quot;: &quot;1.4.4&quot;,
    &quot;deepmerge&quot;: &quot;4.0.0&quot;,
    &quot;express&quot;: &quot;4.17.1&quot;,
    &quot;helmet&quot;: &quot;3.21.1&quot;,
    &quot;lodash&quot;: &quot;4.17.15&quot;,
    &quot;lru-cache&quot;: &quot;5.1.1&quot;,
    &quot;marked&quot;: &quot;0.7.0&quot;,
    &quot;serve-favicon&quot;: &quot;2.5.0&quot;,
    &quot;vee-validate&quot;: &quot;2.0.9&quot;,
    &quot;vue&quot;: &quot;^2.6.10&quot;,
    &quot;vue-i18n&quot;: &quot;8.14.1&quot;,
    &quot;vue-meta&quot;: &quot;2.2.2&quot;,
    &quot;vue-router&quot;: &quot;^3.1.3&quot;,
    &quot;vue-server-renderer&quot;: &quot;^2.6.10&quot;,
    &quot;vuex&quot;: &quot;^3.1.1&quot;,
    &quot;vuex-router-sync&quot;: &quot;^5.0.0&quot;,
    &quot;winston&quot;: &quot;3.2.1&quot;
  },
  &quot;devDependencies&quot;: {
    &quot;tslint&quot;: &quot;^5.12.0&quot;,
    &quot;typescript&quot;: &quot;3.6.3&quot;
  },
  &quot;private&quot;: true
}
</code></pre></div><h4 id="adjust-functions-tsconfig-json"><a href="#adjust-functions-tsconfig-json" aria-hidden="true" class="header-anchor">#</a> Adjust functions/tsconfig.json</h4> <div class="language- extra-class"><pre class="language-text"><code>{
  &quot;extends&quot;: &quot;../tsconfig.json&quot;,
  &quot;compilerOptions&quot;: {
    &quot;module&quot;: &quot;commonjs&quot;,
    &quot;outDir&quot;: &quot;lib&quot;
  },
  &quot;compileOnSave&quot;: true,
  &quot;include&quot;: [&quot;src&quot;]
}
</code></pre></div><h4 id="adjust-functions-tslint-json"><a href="#adjust-functions-tslint-json" aria-hidden="true" class="header-anchor">#</a> Adjust functions/tslint.json</h4> <div class="language- extra-class"><pre class="language-text"><code>{
  &quot;extends&quot;: &quot;../tslint.json&quot;
}
</code></pre></div><h3 id="step-5-set-functions-src-index-ts"><a href="#step-5-set-functions-src-index-ts" aria-hidden="true" class="header-anchor">#</a> Step 5: set functions/src/index.ts</h3> <p>This loads in the 'app' export from src/server/server.ts and makes it accessible via the export of vuesionApp (which Firebase hosting will be looking for to rewrite urls). Note we are setting the hosting environment variable to 'firebase-functions'. Thanks to the code we will write in /src/server/index.ts, this will ensure we don't have multiple processes running on port 3000 when serving with firebase locally.</p> <div class="language- extra-class"><pre class="language-text"><code>import * as functions from 'firebase-functions';

process.env.hosting = 'firebase-functions';

const app = require('../dist/server/server').app;
exports.vuesionApp = functions.https.onRequest(app);
</code></pre></div><h3 id="step-6-adjust-the-root-s-package-json"><a href="#step-6-adjust-the-root-s-package-json" aria-hidden="true" class="header-anchor">#</a> Step 6: adjust the root's package.json</h3> <p>Here we will modify the build script for the project in package.json to also build /functions.
We will similarly add a <code>postinstall</code> script to run <code>npm install</code> in the /functions folder.
Also, since the rest of our app has been built for development on port 3000, we will create a short cut, <code>npm run firebase:serve</code> for serving firebase on port 3000.</p> <div class="language- extra-class"><pre class="language-text"><code>&quot;build&quot;: &quot;vuesion build &amp;&amp; cd ./functions &amp;&amp; npm run build&quot;,
...
&quot;postinstall&quot;: &quot;cd ./functions &amp;&amp; npm i&quot;,
&quot;firebase:serve&quot;: &quot;firebase serve -p 3000&quot;
</code></pre></div><h3 id="step-7-adjust-src-server-index-ts"><a href="#step-7-adjust-src-server-index-ts" aria-hidden="true" class="header-anchor">#</a> Step 7: adjust /src/server/index.ts</h3> <p>For serving with Firebase locally we need to ensure multiple processes don't try to listen on port 3000. So we will make sure the <code>hosting</code> environment variable isn't set to 'firebase-functions'. Also, notice the export statement. This is necessary to make the server app available to functions/src/index.ts.</p> <div class="language- extra-class"><pre class="language-text"><code>import http from 'http';
import { Logger } from './utils/Logger';
import { app } from './server';
export * from './server';

if (process.env.hosting !== 'firebase-functions') {
  const server = http.createServer(app);
  const port: string = process.env.PORT || '3000';
  let currentApp = app;
  server.listen(port, () =&gt; {
    Logger.info(`server started at http://localhost:${port}`);
  });
  if (module.hot) {
    module.hot.accept('./server', () =&gt; {
      server.removeListener('request', currentApp);
      server.on('request', app);
      currentApp = app;
    });
  }
}
</code></pre></div><h3 id="step-8-test-locally"><a href="#step-8-test-locally" aria-hidden="true" class="header-anchor">#</a> Step 8: test locally</h3> <p>From the root of your project:<br> <code>$ npm install</code><br> <code>$ npm run build</code><br> <code>$ npm run firebase:serve</code></p> <p>Your app is now available at http://localhost:3000</p> <h3 id="step-9-deploy"><a href="#step-9-deploy" aria-hidden="true" class="header-anchor">#</a> Step 9: deploy</h3> <p>Set the API base url in src/app/config/production.json to the url where your app will be hosted.</p> <div class="language- extra-class"><pre class="language-text"><code>{
  &quot;api&quot;: {
    &quot;baseUrl&quot;: &quot;&lt;your-project-url-here&gt;&quot;
  }
}
</code></pre></div><p><code>% firebase deploy</code></p> <h3 id="step-10-optional-adjust-the-gitignores"><a href="#step-10-optional-adjust-the-gitignores" aria-hidden="true" class="header-anchor">#</a> Step 10 (optional): adjust the .gitignores</h3> <h4 id="add-the-following-to-functions-gitignore"><a href="#add-the-following-to-functions-gitignore" aria-hidden="true" class="header-anchor">#</a> add the following to functions/.gitignore</h4> <div class="language- extra-class"><pre class="language-text"><code>.vuesion/
dist/
i18n/
</code></pre></div><h4 id="add-the-following-to-gitignore"><a href="#add-the-following-to-gitignore" aria-hidden="true" class="header-anchor">#</a> add the following to .gitignore</h4> <div class="language- extra-class"><pre class="language-text"><code>.firebase/
firebase-debug.log
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/vuesion/docs/edit/master/en/tutorials/deploy-with-firebase.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/docs/en/tutorials/third-party.html" class="prev">
          Use a 3rd party UI library
        </a></span> <span class="next"><a href="/docs/en/docs/style-guide.html">
          Style Guide
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/docs/assets/js/app.2121c953.js" defer></script><script src="/docs/assets/js/2.bed876bd.js" defer></script><script src="/docs/assets/js/25.39f5d5d5.js" defer></script>
  </body>
</html>
